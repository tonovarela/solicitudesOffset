<div class="h-full bg-slate-50 shadow-lg rounded-lg p-5">

  <div *ngIf="!selectedOP">
    <div class="relative">
      <div class="absolute top-0 bottom-0 left-0 flex items-center px-5">
        @if(!cargandoBusqueda()){
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        }@else{
        <div class=" flex items-center justify-center bg-white bg-opacity-75">
          <div class="h-8 w-8 loader"></div>
        </div>
        }
      </div>
      <p-autoComplete [(ngModel)]="valorQuery" styleClass="w-full" baseZIndex="9999" placeholder="Buscar OP" lazy="true"
        scrollHeight="500px" (onSelect)="onSelect($event)" delay="500"
        inputStyleClass="pl-16  py-4 rounded-md shadow-md bg-transparent border-0 w-full outline-none"
        [emptyMessage]="cargandoBusqueda()?'Buscando':'No se encontraron resultados'" field="OP"
        [suggestions]="OPsBusqueda()" (completeMethod)="OnQueryChanged()">
        <ng-template let-op pTemplate="item">
          <div class="grid grid-cols-10 gap-1 justify-center items-center cursor-pointer  rounded-lg">
            <div class="col-start-1 col-end-12  m-0">
              <div class="flex flex-col md:flex-row items-center justify-between  ">
                <h4 class="text-gray-900 font-medium text-pretty">{{op.OP}} </h4>
                <p class="text-gray-900 text-md"> {{op.componente}}</p>
              </div>
              <div class="flex flex-col md:flex-row  items-center justify-between ">
                <p class="text-gray-600 font-regular text-sm">{{op.descripcion}}</p>
                <h5>{{op.cantidad}} piezas</h5>
              </div>
            </div>
          </div>
        </ng-template>
      </p-autoComplete>

    </div>
  </div>


  @if(selectedOP){
  <div class="flex flex-col  sm:flex-row gap-7">
    <div class=" w-full sm:w-1/2 md:w-1/3  my-1">
      <div class="bg-white shadow-lg rounded-lg p-6 space-y-4 relative">
        <button (click)="closeDetail()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
        <div class="flex items-center space-x-4">
          <div class="p-2 bg-purple-200 rounded-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z" />
            </svg>
          </div>
          <div>

            <div class="text-gray-900 text-2xl font-semibold">
              {{ selectedOP!.OP }}
            </div>
            <div class="text-gray-600 text-sm">{{ selectedOP!.descripcion }}</div>
          </div>
        </div>

      </div>
    </div>

    <div class="rounded-lg border bg-card mx-auto  shadow-sm w-full sm:w-1/3 md:w-2/3  xl:w-2/4 my-1  ">
      
      <div class="p-6 ">
        <form class="space-y-4">                                                                
            <div class="flex  flex-col md:flex-row gap-4">
              <div class="grid basis-1/2 gap-2">
                <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                  for="cantidad">
                  Cantidad
                </label>
                <p-inputNumber
                styleClass="w-full"
                placeholder="Cantidad"
                inputStyleClass="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background  placeholder:text-muted-foreground 
                focus-visible:ring-indigo-600
                focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                 mode="decimal" [min]="0" [max]="100" />            
              </div>
              <div class="grid basis-1/2 gap-2">
                <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 "
                  for="maquina">
                  Máquina
                </label>
    
    
                <p-dropdown [options]="options"
                  styleClass="w-full border-2 p-0 rounded-md   focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
                  optionLabel="descripcion" placeholder="Seleccione una máquina" />
    
    
              </div>
            </div>
          
          <div class="flex flex-col md:flex-row  gap-4">
            <div class="grid basis-1/2 gap-2">
              <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
              for="cantidad">
              Fecha de entrega
            </label>
            <p-calendar 
            styleClass="w-full"
            inputStyleClass="flex h-10 w-full rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background  placeholder:text-muted-foreground 
            focus-visible:ring-indigo-600
            focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
            />  
            </div>
  
            <div class="grid basis-1/2 gap-2">
              <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
              for="cantidad">
              Hora de entrega
            </label>
            <p-calendar 
            styleClass="w-full"
            [timeOnly]="true" 
            inputStyleClass="flex h-10 w-full rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background  placeholder:text-muted-foreground 
            focus-visible:ring-indigo-600
            focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
            />  
            </div>
          </div>

          <div class="flex flex-row-reverse">
         <hr>
            <button class="bg-indigo-500 mt-5 text-white rounded-md p-2">Registrar</button>
          </div>

        </form>
      </div>
    </div>

  </div>





  }



  <!-- component -->

</div>